{"version":3,"sources":["graph.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["class graph {\n  static getSourceUrls() {\n    let figElems = document.querySelectorAll('figure');\n\n    let result = [];\n\n    for (let i = 0; i < figElems.length; i++) {\n      let data = {\n        id: figElems[i].id,\n        src: figElems[i].querySelector('img')\n          .dataset.src,\n      };\n\n      result.push(data);\n    }\n\n    return result;\n  }\n\n  static getGistContent(item) {\n    const GH_ROOT = 'http://api.github.com';\n    const GIST_ENDPOINT = 'gists';\n\n    return new Promise((resolve, reject) => {\n      let req = new XMLHttpRequest();\n      req.responseType = 'json';\n      req.open('GET', `${GH_ROOT}/${GIST_ENDPOINT}/${item.src}`);\n\n      req.onload = () => {\n        req.status === 200 ? resolve(req.response) : reject(Error(req.statusText));\n      };\n\n      req.onerror = () => {\n        reject(Error('Network Error'));\n      };\n\n      req.send();\n    }).then((response) => {\n      return {\n        id: item.id,\n        data: JSON.parse(response.files[Object.keys(response.files)[0]].content),\n      };\n    });\n  }\n\n  static drawChart(gistData) {\n    const GRAPH_MARGIN = {\n      top: 10,\n      right: 0,\n      left: 30,\n      bottom: 40,\n    };\n\n    return gistData.then((response) => {\n      response.data.forEach((item) => {\n        item.data.forEach((point, idx) => {\n          point.idx = idx;\n        });\n      });\n\n      let xMax = d3.max(response.data, (item) => { return item.data.length; });\n      let yMax = d3.max(response.data, (item) => { return d3.max(item.data, (elem) => { return elem.value; }); });\n\n      let figElem = document.querySelector(`#${response.id}`);\n\n      let elemWidth = figElem.offsetWidth;\n      let elemHeight = figElem.offsetHeight;\n\n      let figWidth = elemWidth - GRAPH_MARGIN.left - GRAPH_MARGIN.right;\n      let figHeight = elemHeight - GRAPH_MARGIN.top - GRAPH_MARGIN.bottom;\n\n      let xScale = d3.scale.linear()\n        .range([0, figWidth])\n        .domain([0, xMax - 1])\n        .clamp(true)\n        .nice();\n      let yScale = d3.scale.linear()\n        .range([figHeight, 0])\n        .domain([0, yMax])\n        .clamp(true)\n        .nice();\n\n      let xAxis = d3.svg.axis()\n        .scale(xScale)\n        .tickValues('')\n        .orient('bottom');\n      let yAxis = d3.svg.axis()\n        .scale(yScale)\n        .tickValues('')\n        .orient('left');\n\n      let line = d3.svg.line()\n        .interpolate('monotone')\n        .x((d) => {\n          return xScale(d.idx);\n        })\n        .y((d) => {\n          return yScale(d.value);\n        });\n\n      let plot = d3.select(figElem)\n        .append('svg')\n        .attr('width', elemWidth)\n        .attr('height', elemHeight)\n        .append('g')\n        .attr('transform', `translate(${GRAPH_MARGIN.left}, ${GRAPH_MARGIN.top})`);\n\n      plot.append('g')\n        .classed('x axis', true)\n        .attr('transform', `translate(0, ${figHeight})`)\n        .call(xAxis)\n        .append('text')\n        .attr('transform', `translate(${figWidth}, -5)`)\n        .attr('style', 'text-anchor: end')\n        .text('Time');\n\n      plot.append('g')\n        .classed('y axis', true)\n        .call(yAxis)\n        .append('text')\n        .attr('transform', 'translate(15, 0) rotate(-90)')\n        .attr('style', 'text-anchor: end')\n        .text('Intensity');\n\n      response.data.forEach((item) => {\n        plot.append('path')\n          .classed('line', true)\n          .datum(item.data)\n          .attr('d', line);\n      });\n    });\n  }\n};\n"],"sourceRoot":"/source/"}